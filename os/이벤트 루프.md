### 출처

___
### 개요

___
### 자바스크립트와 파이썬의 이상함

자바스크립트와 파이썬은 대표적인 싱글 쓰레드 언어이다. **싱글 쓰레드라 함은 한번에 처리하는 명령어가 한개라는 뜻으로** 콜 스택에서 한개의 함수를 실행하고 함수 내부에 존재하는 **명령어를 한개 씩 실행하는 방식으로 동작한다.** 따라서 <span class="red red-bg"><b>어떠한 명령어가 아직 실행중이라면 다른 명령어는 실행될 수 없다.</b></span>

```python
import asyncio
import random

async def do_something(i: int):
    sec = random.randint(1, 10)
    print(f"{i} Wait for {sec}...")  # random wait...
    await asyncio.sleep(sec)  # 이 부분에서 멈춰야 한다!
    print(f"{i} waiting done")


async def main():
    tasks = [asyncio.create_task(do_something(i)) for i in range(3)]
    await asyncio.gather(*tasks) #wait for end...


if __name__ == "__main__":
    asyncio.run(main())

```

하지만 위의 코드를 실행하면 **대기를 진행하는 코드인 sleep이 실행 중임에도 다음 코드 들이 이어서 실행된다.** 심지어 sleep이 완료되면 다시 이전의 실행 위치로 돌아와 함수를 마저 실행하고 종료되는 형태로 동작한다. <b><u>싱글 쓰레드에서 이러한 동작은 귀신 쓰레드가 sleep의 완료를 대기하고 메인 쓰레드는 이후 코드를 실행하는 것 처럼 보여 위화감을 불러 일으킨다.</u></b> 또한 대기가 발생하던 지점으로 어떻게 돌아오는지도 고민을 해봐야 한다. 우리가 위화감을 느낀 부분을 정리하면 아래와 같다.

* **대기는 누가 어떻게 하는 거지?**
* **어떻게 대기 완료 후 실행 흐름이 돌아오는 거지?**
___
### 이벤트 루프

첫번째 질문인 대기는 누가 어떻게 하는 거지에 대해 생각해보자. 알림 스피커가 고장난 전자렌지를 사용한다 생각해보자, 전자렌지가 전부 돌았는지를 확인 하려면 렌지 앞에서 불이 꺼질때까지 지켜보는 수 밖에 없다. 

자 그러면 정리됐다. 누군가 지켜봐야 하니까 아마 대기를 위한 별도의 쓰레드가 존재하고 이를 활용해 처리를 하는 것이 분명한 것 같다. 따라서 **JS와 파이썬은 선량한 개발자를  우롱하는 싱글 쓰레드인 척하는 언어이고 실상은 멀티 쓰레딩이 가능하다는 진실을 우리는 밝혀냈다.** 귀도 반 로섬을 당장 고소해도 승소할 자신감이 생기는 시점이다.

안타깝게도 이걸 통해 소송을 걸 경우 우리가 패소할 확률이 100%이다. 왜냐하면 **실제로 싱글 쓰레드 언어인 것이 맞고 이벤트 루프를 통해 마치 멀티 쓰레드인 것 처럼 동작 시키기 때문이다.**

이벤트 루프는 말 그대로 반복문으로 






