#tcp

### 출처
https://evan-moon.github.io/2019/11/10/header-of-tcp/ (정리 정말 잘됨)

### 개요
* **TCP의 기본 개념을 이해한다**
* **TCP의 탄생 원인과 목적을 파악한다**
* **TCP의 특성을 이해한다
* **핸드 쉐이크의 개념을 이해한다
* **Half-close, Half-open을 이해한다
___
### TCP란

<u>TCP는 전송 계층에서 사용하는 프로토콜로 데이터 전송에 신뢰성을 보장한다.</u> TCP는 흐름제어, 연결 제어 등을 통해 이를 보장하며, 이로 인해 TCP 위에 위치한 프로그램들은 데이터의 완벽 전송을 보장 받을 수 있다.
TCP의 핵심은 신뢰성있는 통신 즉 손실 없는 통신이며, 나머지 요소는 해당 속성을 구현하기 위해 필요한 요소들이다.
___
### TCP는 왜 만들었을까?
옛날 옛적에는 패킷을 통한 부분 전송이라는 개념이 존재하지 않았다. 무조건 **==회선대 회선으로 통신을 진행하면서 전화 교화원이 연결을 바꿔주는 방식으로 통신이 진행됐다**.== 따라서 우리집에서 철수네 집까지 전화를 연결하려면 <u>우리집 - 중계소 - 중계소 2 - 철수네 집</u>까지 연결되는 회선을 한개 이상씩은 사용해야만 했다.
이러한 방식은 크게 2가지의 문제가 존재했는데, 첫번째는 무조건 하나의 회선을 독점해야 하므로 많은 사용자가 몰릴 경우 이용이 어렵다는 점이고 두번째는 내가 사용하고 있던 회선이나 중계국이 박살 날 경우 연결이 중단된다는 점이다.

TCP를 만든 당시 미국은 한창 냉전 시기였는데, 두번째 문제를 아주 큰 골치로 여겼다. 중계국이나 회선을 독점해야 하는 통신 방식은 전쟁에 있어 무척이나 취약한 형태였기 때문이다. 따라서 ==**데이터를 잘게 쪼개서 여러 곳으로 전송하는 방법을 연구하게 됐는데 이렇게 할 경우 한 중계소나 회선이 죽더라도 일부 데이터는 전달을 받을 수 있기 때문에 물리적 충격에 더 잘 대응 할 수있다.**==

![https://evan-moon.github.io/](https://evan-moon.github.io/static/200a4648f12fe0e8e32c2a9308df4465/0d98f/packets.png)

이러한 패킷 교환 방식의 통신이 제시된 후 패킷을 신뢰성있게 전달을 받고 싶은 욕구가 발생했고 이로 인해 TCP가 만들어지게 됐다.
____

### TCP의 특성
* **연결 지향적***
* **신뢰성
 특성을 크게 2가지로 표현한다면  연결 지향성과 신뢰성으로 압축할 수 있다. 연결지향은 세션을 만들어 통신을 한다는 의미로 해석할 수 있다. 즉, 통신을 하려는 ==두 대상이 논리적으로 만들어진 특정한 회선을 통해서만 통신을 주고받는 방식을 말한다.==
회선을 갖고 통신을 하는 이유는 신뢰성을 보장하기 위함인데 누가 어디까지 보냈고, 누구한테 어디서부터 보낼지를 구분을 하려면 각 사용자가 구분이 돼야하기 때문이다. 
	컨베이어 벨트를 통해 물건을 전달 받는 상황을 가정해보자. 컨베이어 벨트 별로 물건이 전달된다면 각 컨베이어 벨트 별 상태를 측정하고 이에 맞춰 대응하는 것이 가능하다. 하지만 컨베이어 벨트 없이 트럭에서 물건이 쏟아져서 전달된다면, 물건을 구분하는 것이 어려울 것이다. 만약 물건이 몇개 빠졌어도 어느 곳에 물건을 재요청할지도 파악할 수 없다.

==**세션을 통해 TCP는 상태를 확인하고 사용자를 식별할 수 있으며 이는 곧 신뢰성과 무결성을 위한 요소이다.**==

**<u>신뢰성은 TCP의 목적이자 근본이라 할수 있다</u>**. 신뢰성은 말 그대로 데이터 전송을 신뢰할 수 있다는 점을 말한다.
TCP에 데이터를 넘기는 순간 해당 데이터가 손실 없이 전송되는 것은 TCP가 전부 처리해준다는 뜻이다.
TCP에 존재하는 back-to-n, 윈도우 사이즈 조절, 연결 지향, 오프셋, 체크섬은 모두 이를 구현하기 위한 수단이다.

![](https://t1.daumcdn.net/thumb/R720x0/?fname=http://t1.daumcdn.net/brunch/service/user/4Ki1/image/LO5kA5nu5kR_9BiKjoLpADrZCi0.png)

___






 
 
 

